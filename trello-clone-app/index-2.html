<!DOCTYPE html>
<html lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"><script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"><script>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <!-- script src="node_modules/jquery-ui/external/jquery/jquery.js"></script-->
</html>
<body>
    <header>
        <div class="container">
            <form class="form-inline mt-5">
                <input type="text" class="form-control mr-sm-2 mb-2 mb-sm-0" id="your-list" placeholder="Your List">
                <button type="button" class="btn btn-primary mt-2 mt-sm-0" id="add-btn">Add</button>
            </form>
        </div>
        
    </header>
    <main>
        <div class="container-2">

        </div>
    </main>

    <script>
        'use strict'

        var counter = 1;

        $(document).ready(function(){
            var addBtn = $("#add-btn");

            $(addBtn).click(function(){
                var ylist = $("#your-list").val();
                console.log(ylist);

                if(ylist == ''){
                    alert('Insert List!');
                }else{
                    createListTemplate(ylist);
                    ylist = $('#your-list').val('');
                }
            });

            function createListTemplate(title){
                var title;
                var listTemplate;

                listTemplate = $(".container-2").append('<div class="card" id="parent-card'+ counter +'"><div class="card-body" id="child-card1'+ counter +'"><button type="button" class="close" id="closebtn'+ counter +'" aria-label="Close">x</button><h5 class="card-title" id="titlecard'+ counter +'">'+ title +'</h5><button type="button" class="btn btn-info" id="addCardBtn'+ counter +'">Add Card</button></div></div>')
                
                $('#addCardBtn' + counter).click(function(){
                    //$(this).prev().append('<span class>type="text" id="cardlist'+ counter +'" placeholder="Insert Card Name" class="cardtext">');
                    console.log("Agi");
                    
                    $('div').find('h5').append('<li class="d-flex justify-content-between"><input type="text" id="cardlist'+ counter +'" class="form-control" placeholder="Enter Card Name"><input type="submit" id="submit'+ counter +'"><button class="btn btn-primary" id="intomodal'+ counter +'"><span class="glyphicon glyphicon-resize-full"></span></button></li>');
                    //$('#parent-card').append('<li class="d-flex justify-content-between"><input type="text" id="cardlist'+ counter +'" class="form-control" placeholder="Enter Card Name"><input type="submit" id="submit'+ counter +'"><button class="btn btn-primary" id="intomodal'+ counter +'"><span class="glyphicon glyphicon-resize-full"></span></button></li>');

                    //$('#cardlist' + counter).click(function(){
                    //    $(this).attr('contenteditable', 'false');
                    //    $(this).css("border", "none");
                    //});


                    $('#cardlist' + counter).keypress(function(event){                        
                        if(event.which == 13){
                            return false;
                            
                            $(this).css("border", "none");
                            $(this).attr('contenteditable', 'false');
                        }
                    });

                    $('#intomodal' + counter).click(function(){
                        $('body').append('<div id="myModal'+ counter +'" class="modal-fade" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="modal-title">'+ $('#cardlist' + counter).val() +'</h4><button type="button" id="cardbutton'+ counter +'" class="close" data-dismiss="modal">&times;</button></div><div class="modal-body"><p>Description</p><textarea id="description'+ counter +'"></textarea></div><div class="modal-footer"><button class="btn btn-primary" id="adddescription'+ counter +'">Add</button></div></div></div></div>');           
                                   
                        $(".modal-backdrop").css({'background': '#fb0404', 'margin': '0', 'width': '100%', 'height': '100%'});
                        $(".modal-content").css({'height': '500px'});
                        
                        $('#adddescription' + counter).click(function(){
                            $('textarea').css("border", "none");
                        });

                        $('#cardbutton' + counter).click(function(){
                            $('#myModal' + counter).fadeOut('slow');
                        });
                    });

                    //$('#closemodal' + counter).click(function(){
                    //                $('#myModal' + counter).hide();
                    //});

                    ////<div class="modal-body"><h6>'+ $('#cardlist' + counter).val() +'</h6><p>Description</p><textarea id="description'+ counter +'"></textarea><button id="adddescription'+ counter +'">Add</button></div></div></div><button type="button" class="close" data-dismiss="modal" id="closemodal'+ counter +'">&times;</button></div>');

           
                    

                    $('#card-modal' + counter).click(function(){
                                //$('#myModal' + counter).show();

                                //var data = 

                                console.log($('#cardlist' + counter).val());
                                
                                
                            });
                            
                        $('#cardclosebtn').click(function(){
                            console.log("close");
                            $(this).remove();
                        });
                });


                $('#closebtn' + counter).click(function(){
                    $(this).parent().remove();
                });

                counter++;
            };
        });
    </script>
</body>

